# CalendarCraft Migration Tasks
Last Updated: 2024-03-28

## 現在の状態
- NextAuthベースの認証システムが実装済み
- 基本的なコンポーネント構造が整備済み
  - src/components/auth/
  - src/components/providers/
- フックとミドルウェアが実装済み
  - src/hooks/useAuth.ts
  - src/middleware.ts

## 移行先環境
- Supabase Project: sb1-gwh2j4ad
- Project URL: https://fwwpdczjkvfqhmtzleqf.supabase.co
- 既存のデータベース構造を継続利用

## 進行中のタスク
1. 認証システムの移行
   - [ ] useAuth.tsの修正（NextAuth → Supabase）
   - [ ] auth/コンポーネントの修正
   - [ ] middleware.tsの修正

2. データベース接続の設定
   - [ ] lib/supabase.tsの確認と修正
   - [ ] データベース操作関連のフックの修正

3. 環境変数の設定
   - [ ] .env.localの確認と更新
   - [ ] NextAuth関連の環境変数の整理

## 完了したタスク
- [x] プロジェクト構造の確認
- [x] 移行計画の立案

## 注意事項
- 既存のデータベース構造はそのまま利用可能
- 認証システムのみをNextAuthからSupabaseに移行
- 既存の機能は保持したまま環境移行を実施

# 環境移行タスクリスト

## 1. プロジェクト構造の変更
- [ ] Next.jsプロジェクトの新規作成
- [ ] 既存のコードをNext.jsの構造に合わせて移行
- [ ] `app`ディレクトリ構造への移行
- [ ] API Routesの実装

## 2. 認証システムの移行（NextAuth）
- [ ] NextAuth.jsのセットアップ
- [ ] 既存の認証ロジックをNextAuthに移行
- [ ] セッション管理の実装
- [ ] 認証プロバイダーの設定（Google認証など）

## 3. データベース移行（Supabase）
- [ ] 既存のSupabase接続設定の確認
- [ ] データベーススキーマの移行
- [ ] Supabaseクライアントの設定
- [ ] データアクセス層の実装

## 4. デプロイ環境の変更（Vercel）
- [ ] Vercelプロジェクトのセットアップ
- [ ] 環境変数の移行
- [ ] デプロイ設定の更新
- [ ] CI/CDパイプラインの設定

## 5. 依存関係の更新
- [ ] package.jsonの更新
- [ ] 新しい依存関係のインストール
- [ ] 不要な依存関係の削除
- [ ] TypeScript設定の更新

## 6. フロントエンドの移行
- [ ] コンポーネントの移行
- [ ] ルーティングの実装
- [ ] 状態管理の移行
- [ ] スタイリングの移行（Tailwind CSS）

## 7. バックエンド機能の移行
- [ ] APIエンドポイントの実装
- [ ] サーバーサイドロジックの移行
- [ ] ミドルウェアの実装
- [ ] エラーハンドリングの実装

## 8. テストとデバッグ
- [ ] 単体テストの移行
- [ ] 統合テストの実装
- [ ] パフォーマンステスト
- [ ] セキュリティテスト

## 9. ドキュメントの更新
- [ ] READMEの更新
- [ ] APIドキュメントの更新
- [ ] デプロイ手順の更新
- [ ] 開発ガイドラインの更新

## 10. セキュリティと最適化
- [ ] 環境変数の管理
- [ ] セキュリティ設定の確認
- [ ] パフォーマンス最適化
- [ ] エラーハンドリングの改善

## 優先順位
1. プロジェクト構造の変更
2. 認証システムの移行
3. データベース移行
4. デプロイ環境の変更
5. 依存関係の更新
6. フロントエンドの移行
7. バックエンド機能の移行
8. テストとデバッグ
9. ドキュメントの更新
10. セキュリティと最適化

## 注意事項
- 各タスクの完了後は必ずテストを実施
- 変更は段階的に行い、各段階で動作確認
- セキュリティ面での考慮を常に意識
- パフォーマンスへの影響を監視 